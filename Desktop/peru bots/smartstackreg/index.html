<!doctype html>
<!-- BETA BUILD ‚Äì DEMO by Kwame Mensah -->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DEMO de SmartStack para 1xBet por Lucho</title>

  <!-- TailwindCSS CDN (CSS-only, no JS) -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
    /* ===== Cyberpunk / Neon theme ===== */
    :root{
      --bg: #090d12;
      --panel: #0e1420;
      --line: rgba(255,255,255,.08);
      --neon: #60f7a2;     /* emerald neon */
      --vio:  #7c7cff;     /* violet neon  */
      --text: #dbe7ff;
      --muted:#8aa0bf;
    }
    html,body{height:100%}
    body{
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,124,255,.12), transparent),
        radial-gradient(900px 500px at 120% 0%, rgba(96,247,162,.10), transparent),
        var(--bg);
    }
    .wrap{max-width:1100px}

    .hdr{ /* header glass */
      background: rgba(0,0,0,.4);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
    }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:16px;
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }
    .btn{
      border:1px solid rgba(96,247,162,.35);
      color:#e8fff0;
      background:rgba(96,247,162,.08);
      padding:.75rem 1.1rem;
      border-radius:12px;
      transition:.2s;
    }
    .btn:hover{ box-shadow:0 0 0 3px rgba(96,247,162,.12), 0 0 24px rgba(96,247,162,.35) inset; }
    .btn:disabled{ opacity:.45; cursor:not-allowed; }

    .k-logo{letter-spacing:.04em}
    .chip{
      border:1px solid rgba(124,124,255,.4);
      background:rgba(124,124,255,.12);
      color:#eaeafe; border-radius:999px; padding:.25rem .6rem; font-size:.8rem;
    }

    /* Console */
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .console-surface{
      background: rgba(0,0,0,.32);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 12px;
      -webkit-backdrop-filter: blur(3px);
      backdrop-filter: blur(3px);
    }

    /* Game cards (visual only) */
    .game-card{ transition:.2s }
    .game-card:hover{ box-shadow: 0 0 0 3px rgba(124,124,255,.12) inset }

    /* Modal */
    .modal-overlay{
      position:fixed; inset:0; z-index:50;
      display:none; align-items:center; justify-content:center;
      background: radial-gradient(500px 300px at 50% 30%, rgba(96,247,162,.10), transparent) ,
                  rgba(7,10,14,.65);
    }
    .modal{ width:min(92vw, 560px); outline: none; }
    .modal .modal-card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(124,124,255,.25);
      border-radius:18px;
      box-shadow: 0 10px 40px rgba(0,0,0,.45);
    }

    /* Utility: hidden panels */
    .hidden-panel{display:none}

    /* Focus ring */
    .focus-ring:focus{ outline: 2px solid rgba(124,124,255,.55); outline-offset: 2px; }

    /* Accessibility helpers for skipping background when locked */
    .pe-none{ pointer-events:none !important; }
  </style>
</head>
<body class="min-h-screen">

  <!-- Header -->
  <header class="sticky top-0 z-40 border-b border-white/5 hdr">
    <div class="wrap mx-auto px-4 h-14 flex items-center justify-between">
      <div class="k-logo font-semibold text-base sm:text-lg">
        <span class="text-green-300">1xBet</span>
        <span class="text-gray-400"> // </span>
        <span class="text-indigo-300">SmartStack DEMO</span>
        <span class="chip ml-2">by Lucho</span>
      </div>
      <nav class="hidden md:flex gap-6 text-sm text-gray-400">
        <a href="#id" class="hover:text-gray-200">ID</a>
        <a href="#games" class="hover:text-gray-200">Juegos</a>
        <a href="#console" class="hover:text-gray-200">Console</a>
      </nav>
    </div>
  </header>

  <main class="wrap mx-auto px-4 py-6 md:py-8">

    <!-- ================= Screen: ID input ================= -->
    <section id="screen-id" class="screen-id">
      <div class="card p-6 md:p-8">
        <h1 class="text-2xl md:text-3xl font-semibold mb-2">Conecta tu ID de 1xBet</h1>
        <p class="text-sm md:text-base text-blue-100 mb-6">
          Ingresa <b>exactamente 10 d√≠gitos</b> comenzando con <b>137</b>. Ejemplo: <span class="mono">137XXXXXXX</span>
        </p>
        <div class="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
          <input id="idInput" inputmode="numeric" autocomplete="off" maxlength="10" aria-describedby="idHint"
                 class="w-full bg-gray-900 text-gray-100 placeholder-gray-500 border border-white/10 rounded-lg px-4 py-3 tracking-widest text-lg focus-ring"
                 placeholder="137XXXXXXX" />
          <button id="btnConnect" class="btn text-lg sm:w-40 focus-ring" disabled>Conectar</button>
        </div>
        <p id="idHint" class="text-red-400 text-sm mt-3 hidden">El ID debe coincidir con el formato. <span class="mono">137—Ö—Ö—Ö—Ö—Ö—Ö—Ö</span>.</p>
      </div>
    </section>

    <!-- ================= Background Root (games + console) ================= -->
    <section id="bgRoot" class="hidden-panel" aria-hidden="true">
      <!-- Games grid -->
      <div id="games" class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Aviator -->
        <article class="game-card card p-6 flex flex-col">
          <div class="flex items-center justify-between mb-1">
            <h3 class="text-xl font-semibold">Aviator</h3>
            <span class="chip">hot</span>
          </div>
          <p class="text-blue-100 mb-4">Juego Crash, predicci√≥n √∫nica.</p>
          <button class="btn mt-auto w-32">Abrir</button>
        </article>
        <!-- Mines -->
        <article class="game-card card p-6 flex flex-col">
          <h3 class="text-xl font-semibold mb-1">Mines</h3>
          <p class="text-blue-100 mb-4">Tablero de 5√ó5, minas marcadas con <span class="mono">üí•</span>.</p>
          <button class="btn mt-auto w-32">Abrir</button>
        </article>
        <!-- Penalty -->
        <article class="game-card card p-6 flex flex-col">
          <h3 class="text-xl font-semibold mb-1">Penalty</h3>
          <p class="text-blue-100 mb-4">Porter√≠a 4√ó6, objetivo marcado con <span class="mono">‚öΩÔ∏è</span>.</p>
          <button class="btn mt-auto w-32">Abrir</button>
        </article>
      </div>

      <!-- Console (background footer) -->
      <div id="console" class="mt-6">
        <h4 class="font-semibold mb-2">Console Log</h4>
        <div class="console-surface p-3 h-48 overflow-auto">
          <pre id="logBox" class="mono text-sm whitespace-pre-wrap"></pre>
        </div>
      </div>
    </section>

    <!-- ================= MODAL (blocks background clicks) ================= -->
    <div id="modalOverlay" class="modal-overlay" aria-hidden="true">
      <div id="modalDialog"
           class="modal"
           role="dialog"
           aria-modal="true"
           aria-labelledby="modalTitle"
           aria-describedby="modalDesc"
           tabindex="-1">
        <div class="modal-card p-6 md:p-7">
          <h2 id="modalTitle" class="text-2xl md:text-3xl font-semibold mb-2">¬°Tu cuenta no tiene dep√≥sito!</h2>
          <p id="modalDesc" class="text-blue-100 mb-5">
            Recarga <b>40 soles</b> para desbloquear la demo.
            Para m√°s detalles, contacta a <span class="mono">@SmartStackHubBot</span>.
          </p>
          <a id="tgBtn"
             class="btn inline-flex items-center gap-2 focus-ring"
             href="https://t.me/SmartStackHubBot"
             target="_blank" rel="noopener"
             >Abre Telegram @SmartStackHubBot</a>
        </div>
      </div>
    </div>

  </main>

  <script>
  // ============================== State ==============================
  const State = {
    isModalOpen: false,
    consoleTimer: null,
    consoleBuffer: [],
    maxConsole: 200
  };

  // ============================== Elements ==============================
  const el = {
    screenId: document.getElementById('screen-id'),
    bgRoot: document.getElementById('bgRoot'),
    logBox: document.getElementById('logBox'),
    idInput: document.getElementById('idInput'),
    btnConnect: document.getElementById('btnConnect'),
    idHint: document.getElementById('idHint'),
    modalOverlay: document.getElementById('modalOverlay'),
    modalDialog: document.getElementById('modalDialog'),
    tgBtn: document.getElementById('tgBtn'),
  };

  // ============================== Utils ==============================
  function $(s, root=document){ return root.querySelector(s); }
  function ts2(){ const d=new Date(); const p=n=>String(n).padStart(2,'0'); return `[${p(d.getHours())}:${p(d.getMinutes())}:${p(d.getSeconds())}]`; }
  function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
  function randMs(){ return randInt(1000, 2000); }

  function clampConsole(){
    if(State.consoleBuffer.length > State.maxConsole){
      State.consoleBuffer.splice(0, State.consoleBuffer.length - State.maxConsole);
    }
  }
  function writeConsole(line){
    State.consoleBuffer.push(line);
    clampConsole();
    el.logBox.textContent = State.consoleBuffer.join('\n');
    el.logBox.parentElement.scrollTop = el.logBox.parentElement.scrollHeight;
  }

  // ID generator for logs (per spec)
  function genId(){
    return '137' + Math.floor(Math.random()*1e7).toString().padStart(7,'0');
  }

  // Aviator value: exact discrete [0.01..40.99] with two decimals
  function genAviator(){
    const n = randInt(1, 4099); // 1..4099
    return (n/100).toFixed(2);
  }

  // ============================== Console feed ==============================
  function scheduleNextLog(){
    State.consoleTimer = setTimeout(()=>{
      const id = genId();
      const pick = randInt(0,2);
      let line;
      if(pick === 0){
        line = `ID ${id} predict Aviator ‚Äî ${genAviator()}`;
      } else if(pick === 1){
        line = `ID ${id} predict Mines`;
      } else {
        line = `ID ${id} predict Penalty`;
      }
      writeConsole(line);
      scheduleNextLog(); // recurse with new random delay
    }, randMs());
  }
  function startConsoleFeed(){
    if(State.consoleTimer) clearTimeout(State.consoleTimer);
    scheduleNextLog();
  }

  // ============================== UI Lock ==============================
  function lockUI(lock){
    // Block clicks across background; only modal remains interactive
    el.bgRoot.classList.toggle('pe-none', !!lock);
    el.bgRoot.setAttribute('aria-hidden', lock ? 'true' : 'false');
  }

  // ============================== Modal ==============================
  function openModal(){
    State.isModalOpen = true;
    lockUI(true);
    el.modalOverlay.style.display = 'flex';
    el.modalOverlay.removeAttribute('aria-hidden');
    // focus management
    requestAnimationFrame(()=>{
      el.modalDialog.focus();
      el.tgBtn.focus();
    });
  }

  // Focus trap inside the modal
  function handleKeydown(e){
    if(!State.isModalOpen) return;
    if(e.key === 'Escape'){
      // Spec: ESC does not close ‚Äì ignore
      e.preventDefault();
      return;
    }
    if(e.key === 'Tab'){
      // Trap focus to the only focusable (tgBtn) inside dialog
      const focusables = [el.tgBtn];
      const first = focusables[0];
      const last  = focusables[focusables.length-1];
      const active = document.activeElement;
      if(!e.shiftKey && active === last){
        e.preventDefault(); first.focus(); return;
      }
      if(e.shiftKey && active === first){
        e.preventDefault(); last.focus(); return;
      }
    }
  }
  document.addEventListener('keydown', handleKeydown, true);

  // ============================== ID Flow ==============================
  const ID_RE = /^137\d{7}$/;

  // Only digits in the field
  el.idInput.addEventListener('keydown', (e)=>{
    const allowed = ['Backspace','Delete','ArrowLeft','ArrowRight','Tab'];
    if(allowed.includes(e.key)) return;
    if(!/^\d$/.test(e.key)){ e.preventDefault(); }
  });

  el.idInput.addEventListener('input', ()=>{
    const val = el.idInput.value.trim();
    const ok = ID_RE.test(val);
    el.btnConnect.disabled = !ok;
    el.idHint.classList.toggle('hidden', ok);
  });

  el.btnConnect.addEventListener('click', ()=>{
    const val = el.idInput.value.trim();
    if(!ID_RE.test(val)) return;

    // Show background, start console, open modal
    el.screenId.classList.add('hidden-panel');
    el.bgRoot.classList.remove('hidden-panel');
    startConsoleFeed();
    openModal();
  });

  // ============================== End ==============================
  // Start in ID screen; nothing else to do.
  </script>
</body>
</html>